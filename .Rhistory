sapply(seq(1940, 1960, 5), lowest_category)
lowest <- sapply(seq(1940, 1960, 5), lowest_category)
lowest
source('~/IntoUniversity/INFO 201/exercises-dgodin19/chapter-10-exercises/exercise-3/exercise.R')
lowest <- sapply(seq(1940, 1960, 5), lowest_category)
lowest
min <- lapply(df, min)
min
rm(list = ls())
Titanic
is.data.frame(Titanic)
type(Titanic)
typeof(Titanic)
class(Titanic)
titanic_df <- data.frame(Titanic)
class(titanic_df)
is.data.frame(titanic_df)
colnames(titanic_df)
head(titanic_df)
tail(titanic_df)
View(titanic_df)
children <- titanic_df[children]
children <- titanic_df[titanic_df$Age == "Child"]
children <- titanic_df[Age == "Child"]
children titanic_df$Age == "Child"
children <- titanic_df$Age == "Child"
children
children titanic_df[titanic_df$Age == "Child"]
children <- titanic_df[titanic_df$Age == "Child"]
children <- titanic_df[titanic_df$Age = "Child"]
children <- titanic_df[titanic_df$Age = Child]
children <- titanic_df[titanic_df$Age == Child]
children <- titanic_df[titanic_df$Age == "Child", ]
View(children)
num_children <- sum(children)
num_children <- sum(children$Age == "Child")
most_lost <- titanic_df[titanic$df == "No", max(Freq)]
most_lost <- titanic_df[titanic$df == "No", max(titanic_df$Freq)]
most_lost <- titanic_df[titanic_df$Survived == "No", max(titanic_df$Freq)]
most_lost <- titanic_df[titanic_df$Survived == "No", titanic_df$Freq == max(titanic_df$Freq)]
most_lost <-  titanic_df$Survived[titanic_df$Freq == max(titanic_df$Freq)]
most_lost
most_lost <- titanic_df[titanic_df$Survived == "No", "Freq"]
most_lost <- titanic_df[titanic_df$Survived == "No", max("Freq")]
most_lost
class(most_lost)
most_lost <- as.vector(titanic_df[titanic_df$Survived == "No", max("Freq")])
most_lost
most_lost <- (titanic_df[titanic_df$Survived == "No", max(as.vector("Freq")])
most_lost <- (titanic_df[titanic_df$Survived == "No", max(as.list("Freq")])
most_lost <- titanic_df[titanic_df$Survived == "No", sapply(titanic_df$Freq, max)]
most_lost <- titanic_df[titanic_df$Survived == "No", lapply(titanic_df$Freq, max)]
most_lost <- titanic_df[titanic_df$Survived == "No", "Freq"]
max(most_lost)
source('~/IntoUniversity/INFO 201/a3-dgodin19/assignment.r')
class <- titanic_df[titanic$Class == "Crew"]
class <- titanic_df[titanic_df$Class == "Crew"]
class <- titanic_df[titanic_df$Class == "Crew", ]
class
class(class)
adult_males <- class[class$Sex == "Male", class$Age == "Adult"]
adult_males <- class[class$Sex == "Male" && class$Age == "Adult"]
View(adult_males)
View(adult_males)
adult_males <- class[class$Sex == "Male" & class$Age == "Adult"]
adult_males <- class[class$Sex == "Male" || class$Age == "Adult"]
View(adult_males)
adult_males <- class[class$Sex == "Male" & (class$Age == "Adult")]
adult_males <- class[class$Sex == "Male" , class$Age == "Adult"]
adult_males <- class[class$Sex == "Male" , ]
adult_males <- class[calss$Age == "Adult", ]
adult_males <- class[class$Age == "Adult", ]
adult_males <- class[class$Sex == "Male" %in% class$Age == "Adult"]
adult_males <- class[class$Age == "Adult" & class$Sex == "Male"]
class
colnames(class)
adults <- class[class$Age == "Adult"]
adults <- class[class$Age == "Adult"]
class$Age
adults <- class[class$Age]
adults <- class$Age
adult_males[Sex == "Male", Age == "Adult"]
adult_males[Sex, Age]
adult_males <- class[Sex == "Male", Age == "Adult"]
adult_males <- class[Sex == "Male", class$Age == "Adult"]
source('~/IntoUniversity/INFO 201/a3-dgodin19/SurvivalRate.R')
source('~/IntoUniversity/INFO 201/a3-dgodin19/assignment.r')
source('~/IntoUniversity/INFO 201/a3-dgodin19/assignment.r')
source('~/IntoUniversity/INFO 201/a3-dgodin19/SurvivalRate.R')
survival_rate("Crew", titanic_df)
survival_rate("Crew", titanic_df)
source('~/IntoUniversity/INFO 201/a3-dgodin19/SurvivalRate.R')
source('~/IntoUniversity/INFO 201/a3-dgodin19/assignment.r')
survival_rate("Crew", titanic_df)
source('~/IntoUniversity/INFO 201/a3-dgodin19/SurvivalRate.R')
survival_rate("Crew", titanic_df)
clas
class
class <- titanic_df[titanic_df$Class == "Crew", ]
adult_males <- class[class$Sex == "Male", class$Age == "Adult", ]
class
adult_males <- with(class, Sex == "Male" & Age == "Adult")
adult_males
adult_males <- class[with(class, Sex == "Male" & Age == "Adult"), ]
adult_males
source('~/IntoUniversity/INFO 201/a3-dgodin19/SurvivalRate.R')
source('~/IntoUniversity/INFO 201/a3-dgodin19/SurvivalRate.R')
survival_rate("Crew", titanic_df)
class
children <- class[class$age == "Child"]
children
children <- class[class$age == "Child", ]
children
children <- class[class$Age == "Child", ]
children
men
cass
adult_males
survival_rate <- sum(adult_males[adult_males$Freq == "Yes"]) / sum(adult_males$Freq)
survival_rate <- sum(adult_males$Freq == "Yes") / sum(adult_males$Freq)
survival_rate
sum(adult_males$Freq == "Yes")
sum(adult_males[adult_males$Freq == "Yes"])
num_children
children
source('~/IntoUniversity/INFO 201/a3-dgodin19/assignment.r')
source('~/IntoUniversity/INFO 201/a3-dgodin19/assignment.r')
children
source('~/IntoUniversity/INFO 201/a3-dgodin19/assignment.r')
num_children
source('~/IntoUniversity/INFO 201/a3-dgodin19/SurvivalRate.R')
survival_rate <- ("Crew", titanic_df)
source('~/IntoUniversity/INFO 201/a3-dgodin19/SurvivalRate.R')
survival_rate <- survival_rate("Crew", titanic_df)
source('~/IntoUniversity/INFO 201/a3-dgodin19/SurvivalRate.R')
survival_rate <- survival_rate("Crew", titanic_df)
men_df
class <- titanic_df[dataframe$Class = "Crew", ]
class <- titanic_df[dataframe$Class == "Crew", ]
class <- titanic_df[titanic_df$Class == "Crew", ]
men_df <- class[with(class, Sex == "Male" & Age == "Adult"), ]
men_df
all_crew_men <- sum(men_df$Freq)
crew_survivors <- sum(men_df[men_df$Survived == "Yes"])
sum(men_df$Survived == "Yes")
men_df[men_df$Survived = "Yes"]
men_df[men_df$Survived == "Yes"]
men_survived <- men_df[men_df$SSurvived == "Yes", "Freq"]
men_survived <- men_df[men_df$Survived == "Yes", "Freq"]
(men_survived / all_crew_men) * 100
class
women_df <- class[with(class, Sex == "Female" & Age == "Adult"), ]
children_df <- class[class$Age == "Child", ]
all_children_and_women <- sum(children_df$Freq, women_df$Freq)
source('~/IntoUniversity/INFO 201/a3-dgodin19/SurvivalRate.R')
survival_rate("Crew", titanic_df)
source('~/IntoUniversity/INFO 201/a3-dgodin19/SurvivalRate.R')
survival_rate("Crew", titanic_df)
source('~/IntoUniversity/INFO 201/a3-dgodin19/SurvivalRate.R')
survival_rate("Crew", titanic_df)
source('~/IntoUniversity/INFO 201/a3-dgodin19/SurvivalRate.R')
survival_rate("Crew", titanic_df)
source('~/IntoUniversity/INFO 201/a3-dgodin19/SurvivalRate.R')
survival_rate("Crew", titanic_df)
source('~/IntoUniversity/INFO 201/a3-dgodin19/SurvivalRate.R')
survival_rate("Crew", titanic_df)
source('~/IntoUniversity/INFO 201/a3-dgodin19/SurvivalRate.R')
survival_rate("Crew", titanic_df)
source('~/IntoUniversity/INFO 201/a3-dgodin19/assignment.r')
titanic_df
source('~/IntoUniversity/INFO 201/a3-dgodin19/assignment.r')
first_survived
second_survived
third_survived
crew_survived
install.packages("devtools")
install.packages("devtools")
updateR()
install.packages("installr")
install.packages("fueleconomy", dependencies = TRUE, INSTALL_opts = '--no-lock')
install.packages("devtools")
install.packages("devtools")
install.packages("devtools")
install.packages("devtools")
devtools::install_github("hadley/fueleconomy")
library(fueleconomy)
install.packages("cli"
)
install.packages("cli")
devtools::install_github("hadley/fueleconomy")
restart()
install.packages("devtools")
devtools::install_github("hadley/fueleconomy")
library(fueleconomy)
View(vehicles)
makes <- vehicles$make
unique(makes)
length(unique(makes))
order(cars_1997, method = hwy)
cars_1997 <- vehicles[vehicles$year == 1997, ]
order(cars_1997, method = hwy)
cars_1997 <- cars_1997[order(cars_1997$hwy), ]
source('~/IntoUniversity/INFO 201/exercises-dgodin19/chapter-11-exercises/exercise-1/exercise.R')
install.packages("devtools")
two_wheel_drive
source('~/IntoUniversity/INFO 201/exercises-dgodin19/chapter-11-exercises/exercise-1/exercise.R')
install.packages("devtools")
two_wheel_drive <- vehicles[vehicles$drive == "2-Wheel Drive" & vehicles$cty > 20, ]
View(two_wheel_drive)
source('~/IntoUniversity/INFO 201/exercises-dgodin19/chapter-11-exercises/exercise-2/exercise.R')
library(fueleconomy)
library(dplyr)
make <- select(vehicles, make)
distinct <- distinct(make)
distinct <- nrow(distinct(make))
car_1997 <- filter(vehicles, year == 1997)
cars_1997 <- mutate(cars_1997, average = (hwy + cty) / 2)
car_1997 <- mutate(car_1997, average = (hwy + cty) / 2)
cars_1997 <- arrange(cars_1997, hwy)
car_1997 <- arrange(cars_1997, hwy)
car_1997 <- arrange(car_1997, hwy)
two_wheel_20_mpg <- filter(vehicles, drive == "2-Wheel Drive", cty > 20)
library("dplyr")
library("fueleconomy")
make <- select(vehicles, make)
acura_2015 <- filter(vehicles, make == "Acura", year == 2015)
best_acura <- filter(acura_2015, hwy == max(hwy))
best_model <- select(best_acura, model)
View(best_model)
best_model <- select(
filter(
filter(vehicles, make == "Acura", year == 2015), hwy == max(hwy)
), model
)
best_model <- filter(vehicles, make == "Acura", year == 2015) %>%
filter(hwy == max(hwy)) %>%
select(model)
library("nycflights13")
library(dplyr)
flights
head(flights)
tail(flights)
flights <- mutate(flights, gain_in_air = arr_delay - dep_delay)
flights <- arrange(flights, desc(gain_in_air))
flights$gain_in_air
flights
flights <- flights %>%
mutate(gain_in_air = arr_delay - dep_delay) %>%
arrange(desc(gain_9n_air))
arrange(desc(gain_in_air))
flights <- flights %>%
mutate(gain_in_air = arr_delay - dep_delay) %>%
arrange(desc(gain_in_air))
hist(flights$gain_in_air)
library("nycflights13")
library("dplyr")
dep_delay_by_month <- flights %>%
group_by(month) %>%
summarize(delay = mean(dep_delay, na.rm = TRUE))
dep_delay_by_month
max(dep_delay_by_month)
plot(dep_delay_by_month)
library("nycflights13")
library("dplyr")
largest_arrival_delay <- flights %>%
group_by(dest) %>%\
largest_arrival_delay <- flights %>%
group_by(dest) %>%
summarize(avg_delay == mean(arr_delay, na.rm = TRUE)) %>%
mutate(faa = dest) %>%
left_join(avg_delay == max(avg_delay, na.rm = TRUE))
largest_arrival_delay <- flights %>%
group_by(dest) %>%
mutate(faa = dest) %>%
summarize(avg_delay == mean(arr_delay, na.rm = TRUE)) %>%
mutate(faa = dest) %>%
left_join(airports, by = "faa") %>%
filter(avg_delay == max(avg_delay, na.rm = TRUE))
largest_arrival_delay <- flights %>%
group_by(dest) %>%
summarise(avg_delay = mean(arr_delay, na.rm = TRUE)) %>%
mutate(faa = dest) %>%
left_join(airports, by = "faa") %>%
filter(avg_delay == max(avg_delay, na.rm = TRUE))
largest_arrival_delay
knitr::opts_chunk$set(echo = TRUE)
source("dennistest.R")
knitr::opts_chunk$set(echo = TRUE)
source("dennistest.R")
knitr::opts_chunk$set(echo = TRUE)
source("dennistest.R")
install.packages("cardata")
install.packages("carData")
library(carData)
head(Prestige)
help(Prestige)
hist(income, main="Histogram of the variable income", data=Prestige)
hist(Prestige$income, main="Histogram of the variable income", data=Prestige)
hist(Prestige$income, main="Histogram of the variable income")
hist(Prestige$income, main="Histogram of the variable income", xlab="Income")
plot(income_dens, main="Density plot of the variable income")
income_dens <- density(income)
income_dens <- density(Prestige$income)
plot(income_dens, main="Density plot of the variable income")
income_dens <- density(Prestige$income)
plot(income_dens, main="Density plot of the variable income")
boxplot(Prestige$income~Prestige$type, col="skyblue",main="Boxplots of income by profession type", xlab="Income", ylab= "type")
boxplot(Prestige$income~Prestige$type, col="skyblue",main="Boxplots of income by profession type", xlab="Type", ylab= "Income")
income_prof<- Prestige[Prestige$income, Prestige$type=="prof"]
income_prof<- Prestige[Prestige$income, type=="prof"]
income_prof <- Prestige$income[Prestige$type == "prof"]
income_bc   <- Prestige$income[Prestige$type == "bc"]
#test the equality of the two variance
var.test(income_prof,income_bc)
#construct 95% CI for the difference between the means
t.test(income_prof,income_bc, var.equal = FALSE, conf.level=0.95)
income_prof <- Prestige$income[Prestige$type == "prof"]
income_bc   <- Prestige$income[Prestige$type == "bc"]
#test the equality of the two variance
var.test(income_prof,income_bc)
#construct 95% CI for the difference between the means
t.test(income_prof,income_bc, var.equal = FALSE, conf.level=0.95)
t.test(income_prof,income_bc,alternative="greater",var.equal = FALSE)
plot(income~education,data = Prestige, xlab = "Education", ylab = "Income",
main = "Income vs Education", cex = 1, col="dodgerblue")
plot(income~education,data = Prestige, xlab = "Education", ylab = "Income",
main = "Income vs Education", cex = 1, col="dodgerblue")
reg <- lm(income~education)
plot(income~education,data = Prestige, xlab = "Education", ylab = "Income",
main = "Income vs Education", cex = 1, col="dodgerblue")
reg <- lm(Prestige$income~Prestige$education)
abline(reg)
plot(income~women,data = Prestige, xlab = "women", ylab = "Income",
main = "Income vs Women", cex = 1, col="dodgerblue")
reg <- lm(Prestige$income~Prestige$education)
abline(reg)
plot(income~education,data = Prestige, xlab = "Education", ylab = "Income",
main = "Income vs Education", cex = 1, col="dodgerblue")
reg <- lm(Prestige$income~Prestige$education)
abline(reg)
plot(income~women,data = Prestige, xlab = "women", ylab = "Income",
main = "Income vs Women", cex = 1, col="dodgerblue")
reg <- lm(Prestige$income~Prestige$education)
abline(reg)
plot(income~women,data = Prestige, xlab = "Women", ylab = "Income",
main = "Income vs Women", cex = 1, col="dodgerblue")
reg <- lm(Prestige$income~Prestige$education)
abline(reg)
options(repos = c(CRAN = "https://cloud.r-project.org"))
install.packages("tinytex")
install.packages("carData")
options(repos = c(CRAN = "https://cloud.r-project.org"))
install.packages("tinytex")
install.packages("carData")
install.packages("Rtools")
options(repos = c(CRAN = "https://cloud.r-project.org"))
install.packages("tinytex")
install.packages("carData")
tinytex::install_tinytex()
model <- lm(income~education, data = Prestige)
library(carData)
head(Prestige)
model <- lm(income~education, data = Prestige)
model <- lm(income~education, data = Prestige)
model
line <- lm(income~education, data = Prestige)
summary(line)
line <- lm(income~education, data = Prestige)
summary(line)
plot(Prestige$education, Prestige$income, main = "Education vs Income")
abline(line, lwd = 2)
line <- lm(income~education, data = Prestige)
summary(line)
plot(Prestige$education, Prestige$income, main = "Education vs Income", xlab = "Education", ylab = "Income")
abline(line, lwd = 2)
line <- lm(income~education, data = Prestige)
summary(line)
plot(Prestige$education, Prestige$income, main = "Education vs Income", xlab = "Education", ylab = "Income")
abline(line, lwd = 2)
confit(line, level = 0.95)
confint(line, level = 0.95)
plot(Prestige$education, Prestige$income, main = "Education vs Income", xlab = "Education", ylab = "Income")
abline(line, lwd = 2)
summary(Prestige)
ssto <- 101 * var(Prestige$income)
y_hat <- fitted(line)
y_bar <- mean(Prestige$income)
ssr <- sum((y_hat - y_bar)^2)
sse <- ssto - ssr
n <- nrow(Prestige)
p <- 1
msr <- ssr / p
mse <- sse / (n - p - 1)
f_statistic <- msr / mse
critical_value <- qf(0.95, df1 = 1, df2 = 100)
setwd("C:/Users/denni/Documents/GitHub/assignment-3-dgodin19")
suppressPackageStartupMessages(library(biomaRt))
suppressPackageStartupMessages(library(tidyverse))
library(tidyverse)
#### Loading and processing data ####
#' Load Expression Data
#'
#' @param filepath A text string of the full filepath to the file to load.
#'
#' @return A tibble containing the data loaded from the CSV in `filepath`.
#'
#' @details Note that not all CSVs are created equal, and there are often cases where
#' the data will not load in correctly on the first try. You may want to write this functon to
#' adjust the CSV file being loaded into this assignment so that it can be formed into a
#' tibble correctly.
#'
#' @examples
#' `data <- load_expression('/project/bf528/project_1/data/example_intensity_data.csv')`
load_expression <- function(filepath) {
result <- read.csv(filepath)
result <- as_tibble(result)
return(result)
}
df <- load_expression("data/example_intensity_data_subset.csv")
df
#' Filter 15% of the gene expression values.
#'
#' @param tibble A tibble of expression values, rows by probe and columns by sample.
#'
#' @return A tibble of affymetrix probe names from the input expression data tibble.
#' These names match the rows with 15% or more of the expression values about log2(15).
#'
#'
#' @examples `samples <- filter_15(data_tib)`
#' `> str(samples)`
#' `tibble [40,158 Ã— 1] (S3: tbl_df/tbl/data.frame)`
#' `$ probe: chr [1:40158] "1007_s_at" "1053_at" "117_at" "121_at" ...`
#'
filter_15 <- function(tibble){
n_expr <- ncol(tibble) - 1
tibble$percent_above_15 <- rowSums(tibble[,-1] > log2(15)) / n_expr
result <- tibble %>%
filter(percent_above_15 >= 0.15) %>%
select(probe)
return(result)
}
#### Gene name conversion ####
#' Convert affymetrix array names into hgnc_symbol IDs using biomaRt. Inputs and
#' outputs will likely not be the same size.
#'
#' @param affy_tib A single column tibble of strings containing array names.
#'
#' @return A 2 column tibble that contains affy IDs in the first column,
#' and their corresponding HGNC gene ID in the second column. Note that not all affy IDs
#' will necessarily correspond with a gene ID, and one gene may have multiple affy IDs.
#'
#' @details Connecting to ensembl via biomaRt can be...hit or miss...so you may
#' want to check if data was correctly returned (or if it was just empty). The
#' `getBM()` function may not accept a tibble, so you might need to convert your
#' input into a flat vector.
#'
#' @examples
#' `> affy_to_hgnc(tibble(c('202860_at', '1553551_s_at')))`
#' `affy_hg_u133_plus_2 hgnc_symbol`
#' `1        1553551_s_at      MT-ND1`
#' `2        1553551_s_at       MT-TI`
#' `3        1553551_s_at       MT-TM`
#' `4        1553551_s_at      MT-ND2`
#' `5           202860_at     DENND4B`
affy_to_hgnc <- function(affy_vector) {
affy_vector <- as.character(affy_vector[[1]])
mart <- useMart("ensembl")
mart <- useDataset("hsapiens_gene_ensembl",mart)
result <- getBM(attributes = c("affy_hg_u133_plus_2", "hgnc_symbol"),
filters    = "affy_hg_u133_plus_2",
values     = affy_vector,
mart       = mart)
result <- result %>% select(affy_hg_u133_plus_2, hgnc_symbol)
return(result)
}
ids <- affy_to_hgnc(df_2)
filter_15 <- function(tibble){
n_expr <- ncol(tibble) - 1
tibble$percent_above_15 <- rowSums(tibble[,-1] > log2(15)) / n_expr
result <- tibble %>%
filter(percent_above_15 >= 0.15) %>%
select(probe)
return(result)
}
df_2 <- filter_15(df)
affy_to_hgnc <- function(affy_vector) {
affy_vector <- as.character(affy_vector[[1]])
mart <- useMart("ensembl")
mart <- useDataset("hsapiens_gene_ensembl",mart)
result <- getBM(attributes = c("affy_hg_u133_plus_2", "hgnc_symbol"),
filters    = "affy_hg_u133_plus_2",
values     = affy_vector,
mart       = mart)
result <- result %>% select(affy_hg_u133_plus_2, hgnc_symbol)
return(result)
}
ids <- affy_to_hgnc(df_2)
ids
View(df)
View(df_2)
install.packages("testthat")
pwd
pwd()
wd()
getwd()
testthat:test_file("test_main.R")
library(testthat)
testthat:test_file("test_main.R")
testthat::test_file("test_main.R")
testthat::test_file("test_main.R")
testthat::test_file("test_main.R")
testthat::test_file("test_main.R")
